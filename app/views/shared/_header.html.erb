<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-links">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span> 
      </button>
      
      <%= link_to icon("fab", "facebook") << " Facebook on Rails", root_url, class: "navbar-brand" %>
      
    </div>
    
    <% if user_signed_in? %>
    <div  id="nav-links" class=" collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-left">
        <li>
          <%= form_tag search_path, method: :get, enforce_utf8: false, authenticity_token: false, class: ["navbar-form", "navbar-left"] do %>
            <div class="input-group search-bar">
              <%= text_field_tag :q, params[:q], class: "form-control", placeholder: "Search"  %>
              <span class="input-group-btn">
                <%= button_tag name: nil, class: ["btn", "btn-default"] do %>
                  <%= icon("fas", "search") %>
                <% end %>
              </span>
            </div>
          <% end %>
        </li>
      </ul>
    
      <ul class="nav navbar-nav navbar-right">
      
        <li><%= link_to icon("fas", "user-circle") << " ".html_safe << current_user.first_name, current_user %></li>
        <li><%= link_to icon("fas", "home") << " Home", root_url %></li>
        <li><%= link_to icon("fas", "users") << " Friends", friends_user_path(current_user) %></li>
        
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown"  href="#">
            <%= icon("fas", "user-plus") %>
            Friend Requests
          <ul class="dropdown-menu">
            <li><%= link_to("Sent", sent_friend_requests_path) %></li>
            <li><%= link_to('Recieved', received_friend_requests_path) %></li>
          </ul>
        </li>
        
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><%= link_to icon("fas", "cog") << " Settings", edit_user_registration_path %></li>
            <li><%= link_to icon("fas", "sign-out-alt") << " Log Out", destroy_user_session_path, method: :delete %></li>
          </ul>
        </li>
      </ul>
      
      </div>
      
    <% else %>
    
      <div class="navbar-right collapse navbar-collapse" id="nav-links">
        <%= form_for :user, url: session_path(:user), html: { class: "form-signin navbar-form" } do |f| %>
            <%= f.label :email, class: "sr-only" %>
            <%= f.email_field :email, value: nil, class: "form-control", placeholder: "Email" %>
            <%= f.label :password, class: "sr-only" %>
            <%= f.password_field :password, class: "form-control", placeholder: "Password"  %>
          <%= f.button "Log In", class: ["btn", "btn-primary"] %>
          <%= link_to "#{icon("fab", "google")} Log in with Google".html_safe, user_google_oauth2_omniauth_authorize_path, class: ["btn", "btn-default"] %>
        <% end %>
      </div>
    <% end %>
    
  </div>
</nav>